#!/bin/bash

# Проверяем, передан ли путь к папке
if [ -z "$1" ]; then
    echo "Ошибка: путь к папке не указан."
    exit 1
fi

DIR="$1"

# Проверяем, существует ли папка
if [ ! -d "$DIR" ]; then
    echo "Ошибка: папка '$DIR' не существует."
    exit 1
fi

# Проходим по всем файлам в папке
for FILE in "$DIR"/*; do
    # Проверяем, является ли это файлом
    if [ -f "$FILE" ]; then
        # Получаем имя владельца файла
        OWNER=$(stat -c "%U" "$FILE")
        
        # Создаем директорию с именем владельца, если её нет
        OWNER_DIR="$DIR/$OWNER"
        if [ ! -d "$OWNER_DIR" ]; then
            mkdir "$OWNER_DIR"
        fi
        
        # Перемещаем файл в директорию владельца
        mv "$FILE" "$OWNER_DIR/"
    fi
done

echo "Файлы успешно отсортированы по владельцам."
